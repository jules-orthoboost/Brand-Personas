<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrthoBoost - Brand Persona Clusters</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶∑</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #29bbf6 0%, #163055 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 4px solid #29bbf6;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .logo {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
        }
        
        .logo-icon {
            font-size: 48px;
        }
        
        h1 {
            color: #163055;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .subtitle {
            color: #163055;
            opacity: 0.8;
            font-size: 1.1em;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f8fdff;
            padding: 12px 20px;
            border-radius: 10px;
            border: 2px solid #79efe1;
        }
        
        .control-label {
            font-weight: 600;
            color: #163055;
            font-size: 14px;
        }
        
        .filter-button {
            padding: 8px 16px;
            border: 2px solid #79efe1;
            background: white;
            color: #163055;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .filter-button:hover {
            border-color: #29bbf6;
            color: #29bbf6;
        }
        
        .filter-button.active {
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            color: white;
            border-color: #29bbf6;
        }
        
        .action-button {
            padding: 10px 20px;
            border: 2px solid #29bbf6;
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .action-button:hover {
            background: #79efe1;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .info-box {
            background: linear-gradient(135deg, rgba(41, 187, 246, 0.1) 0%, rgba(121, 239, 225, 0.1) 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #29bbf6;
        }
        
        .info-box h3 {
            color: #163055;
            margin-bottom: 10px;
        }
        
        .info-box p {
            color: #163055;
            line-height: 1.6;
            margin-bottom: 5px;
        }
        
        #visualization {
            background: #f8fdff;
            border-radius: 15px;
            padding: 20px;
            min-height: 800px;
            position: relative;
            overflow: hidden;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #29bbf6;
            font-size: 18px;
        }
        
        .error {
            background: #fed7d7;
            border: 2px solid #fc8181;
            padding: 20px;
            border-radius: 10px;
            color: #742a2a;
            margin: 20px 0;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            pointer-events: none;
            z-index: 1000;
            max-width: 350px;
            line-height: 1.6;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .cluster-circle {
            transition: all 0.3s ease;
        }
        
        .cluster-circle.dimmed {
            opacity: 0.2;
        }
        
        .cluster-label {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .cluster-label:hover {
            font-size: 16px;
        }
        
        .persona-node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .persona-node.selected {
            filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.8));
        }
        
        .persona-node.dimmed {
            opacity: 0.2;
        }
        
        .persona-node:hover {
            filter: brightness(1.2) drop-shadow(0 0 8px rgba(0, 0, 0, 0.3));
        }
        
        .link {
            stroke: #cbd5e0;
            stroke-opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .link.strong {
            stroke: #29bbf6;
            stroke-width: 4px;
            stroke-opacity: 0.9;
        }
        
        .link.medium {
            stroke: #a0aec0;
            stroke-width: 3px;
            stroke-opacity: 0.7;
        }
        
        .link.weak {
            stroke: #e2e8f0;
            stroke-width: 2px;
            stroke-opacity: 0.5;
        }
        
        .link.dimmed {
            opacity: 0.1;
        }
        
        .link.highlighted {
            stroke-width: 5px;
            stroke-opacity: 1;
        }
        
        .stats-panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(41, 187, 246, 0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-item {
            background: #f8fdff;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #29bbf6;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stat-label {
            font-size: 13px;
            color: #163055;
            margin-top: 5px;
        }
        
        .legend {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(41, 187, 246, 0.1);
            border: 2px solid rgba(41, 187, 246, 0.2);
        }
        
        .legend-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #163055;
        }
        
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .zoom-controls {
            position: absolute;
            top: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(41, 187, 246, 0.2);
            border: 2px solid #79efe1;
        }
        
        .zoom-button {
            width: 40px;
            height: 40px;
            border: none;
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .zoom-button:hover {
            background: #79efe1;
            transform: scale(1.1);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(22, 48, 85, 0.9);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: white;
            margin: 2% auto;
            padding: 0;
            width: 90%;
            max-width: 1200px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: slideIn 0.3s ease;
            max-height: 90vh;
            overflow: auto;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            padding: 30px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            color: white;
            margin: 0;
            font-size: 1.8em;
        }
        
        .modal-close {
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            line-height: 1;
            padding: 0 10px;
        }
        
        .modal-close:hover {
            transform: rotate(90deg);
            opacity: 0.8;
        }
        
        .modal-body {
            padding: 40px;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .detail-section {
            background: linear-gradient(135deg, rgba(41, 187, 246, 0.05) 0%, rgba(121, 239, 225, 0.05) 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #29bbf6;
        }
        
        .detail-section h3 {
            color: #163055;
            margin-bottom: 12px;
            font-size: 1.1em;
        }
        
        .detail-section p {
            color: #163055;
            line-height: 1.7;
            white-space: pre-line;
            opacity: 0.9;
        }
        
        .design-tabs {
            background: #f8fdff;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            border: 2px solid rgba(41, 187, 246, 0.2);
        }
        
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab-button {
            padding: 12px 20px;
            border: 2px solid #79efe1;
            background: white;
            color: #163055;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tab-button:hover {
            border-color: #29bbf6;
            transform: translateY(-2px);
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, #29bbf6 0%, #79efe1 100%);
            color: white;
            border-color: #29bbf6;
        }
        
        .tab-content {
            min-height: 200px;
        }
        
        .tab-pane {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 10px;
            color: #163055;
            line-height: 1.8;
            white-space: pre-line;
            box-shadow: 0 2px 10px rgba(41, 187, 246, 0.1);
        }
        
        .tab-pane.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-footer {
            padding: 20px 40px 40px 40px;
            text-align: center;
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .modal-footer .action-button {
            display: inline-block;
            text-decoration: none;
            padding: 15px 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-section">
                <span class="logo-icon">ü¶∑</span>
                <div class="logo">OrthoBoost</div>
            </div>
            <h1>Brand Persona Clusters</h1>
            <p class="subtitle">Interactive visualization of orthodontic practice personas and their relationships</p>
        </div>
        
        <div class="info-box">
            <h3>üéÆ How to Use This Tool</h3>
            <p><strong>Click a persona circle</strong> to highlight its connections and see detailed relationship statistics</p>
            <p><strong>Filter by overlap strength</strong> to focus on Strong (80%), Medium (50%), or Weak (30%) relationships</p>
            <p><strong>Zoom and pan</strong> with your mouse wheel and drag to explore clusters in detail</p>
            <p><strong>Hover over elements</strong> for detailed information about characteristics and shared traits</p>
        </div>
        
        <div id="loading" class="loading">‚è≥ Loading OrthoBoost visualization...</div>
        <div id="error-message" class="error" style="display: none;"></div>
        
        <div id="controls" style="display: none;">
            <div class="controls">
                <div class="control-group">
                    <span class="control-label">Show Overlaps:</span>
                    <button class="filter-button active" data-filter="all">All</button>
                    <button class="filter-button" data-filter="strong">Strong</button>
                    <button class="filter-button" data-filter="medium">Medium</button>
                    <button class="filter-button" data-filter="weak">Weak</button>
                </div>
                <button class="action-button" onclick="resetView()">üîÑ Reset View</button>
                <button class="action-button" onclick="toggleLabels()">üè∑Ô∏è Toggle Labels</button>
            </div>
        </div>
        
        <div id="visualization"></div>
        
        <div id="stats" class="stats-panel" style="display: none;">
            <h3>üìä Current Selection Stats</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="stat-connections">0</div>
                    <div class="stat-label">Direct Connections</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-strong">0</div>
                    <div class="stat-label">Strong Overlaps</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-medium">0</div>
                    <div class="stat-label">Medium Overlaps</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stat-weak">0</div>
                    <div class="stat-label">Weak Overlaps</div>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-title">Persona Categories & Overlap Strengths</div>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-color" style="background: #3182ce;"></div>
                    <span>Budget/Accessible</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #38a169;"></div>
                    <span>Family-Focused</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #805ad5;"></div>
                    <span>Cosmetic/Aesthetic</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #d69e2e;"></div>
                    <span>Clinical/Scientific</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #48bb78;"></div>
                    <span>Wellness/Education</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ed64a6;"></div>
                    <span>Pediatric/Wellness</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #319795;"></div>
                    <span>Wellness/Alternative</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #29bbf6; width: 40px; height: 4px;"></div>
                    <span><strong>Strong Overlap:</strong> 80% similarity</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #79efe1; width: 40px; height: 3px;"></div>
                    <span><strong>Medium Overlap:</strong> 50% similarity</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #a0aec0; width: 40px; height: 2px;"></div>
                    <span><strong>Weak Overlap:</strong> 30% similarity</span>
                </div>
            </div>
        </div>
        
        <div class="footer" style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid rgba(41, 187, 246, 0.2); color: #163055; opacity: 0.7; font-size: 14px;">
            <strong>OrthoBoost</strong> Brand Persona Analysis Tool ‚Ä¢ Click personas to explore relationships
        </div>
    </div>

    <script>
        // Load D3.js dynamically
        function loadD3() {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js';
                script.onload = () => {
                    if (typeof d3 !== 'undefined') {
                        console.log('D3.js loaded successfully');
                        resolve();
                    } else {
                        reject(new Error('D3.js loaded but not available'));
                    }
                };
                script.onerror = () => {
                    const altScript = document.createElement('script');
                    altScript.src = 'https://unpkg.com/d3@7.8.5/dist/d3.min.js';
                    altScript.onload = () => {
                        if (typeof d3 !== 'undefined') {
                            console.log('D3.js loaded from alternative CDN');
                            resolve();
                        } else {
                            reject(new Error('D3.js not available from any CDN'));
                        }
                    };
                    altScript.onerror = () => reject(new Error('Failed to load D3.js'));
                    document.head.appendChild(altScript);
                };
                document.head.appendChild(script);
            });
        }

        // Persona data
        const personas = [
            {
                id: 1,
                name: "Budget-Friendly",
                fullName: "Dr. A. Joe - Budget-Friendly Everyday Ortho",
                color: "#3182ce",
                category: "Budget/Accessible",
                characteristics: ["value-driven", "promotional", "accessible", "bright-colors", "direct-cta"]
            },
            {
                id: 2,
                name: "Family Community",
                fullName: "Dr. M. Rogers - Family-Focused Community Ortho",
                color: "#38a169",
                category: "Family-Focused",
                characteristics: ["family-oriented", "warm-friendly", "community", "multi-generational", "trust"]
            },
            {
                id: 3,
                name: "Adult Cosmetic",
                fullName: "Dr. K. Clarkson - Adult Cosmetic-Focused Aesthetic Ortho",
                color: "#805ad5",
                category: "Cosmetic/Aesthetic",
                characteristics: ["sleek-minimal", "professional", "cosmetic-results", "urban", "aspirational"]
            },
            {
                id: 4,
                name: "Clinical Expertise",
                fullName: "Dr. C. Yang - High-Expertise Clinical Ortho",
                color: "#d69e2e",
                category: "Clinical/Scientific",
                characteristics: ["credentials", "clinical-authority", "results-driven", "technical", "expertise"]
            },
            {
                id: 5,
                name: "Premium Family",
                fullName: "Dr. G. House - Premium Family Ortho",
                color: "#2f855a",
                category: "Family-Focused",
                characteristics: ["polished", "family-oriented", "elevated", "technology", "outcomes"]
            },
            {
                id: 6,
                name: "Wellness Educator",
                fullName: "Dr. V. Frizzle - The Wellness Educator",
                color: "#48bb78",
                category: "Wellness/Education",
                characteristics: ["educational", "natural", "empowerment", "holistic", "root-cause"]
            },
            {
                id: 7,
                name: "Luxury Wellness",
                fullName: "D. K. Kardashian - Luxury Wellness Practice",
                color: "#9f7aea",
                category: "Cosmetic/Aesthetic",
                characteristics: ["spa-like", "premium", "serene", "luxury", "elevated"]
            },
            {
                id: 8,
                name: "Science-Driven",
                fullName: "Dr. B. Nye - Science-Driven Holistic Clinic",
                color: "#dd6b20",
                category: "Clinical/Scientific & Wellness",
                characteristics: ["research-backed", "diagnostic", "clinical-natural", "functional", "systems-based"]
            },
            {
                id: 9,
                name: "Pediatric Wellness",
                fullName: "Dr. McStuffins - Pediatric Wellness Practice",
                color: "#ed64a6",
                category: "Pediatric/Wellness",
                characteristics: ["child-centered", "preventive", "developmental", "airway-focused", "parent-education"]
            },
            {
                id: 10,
                name: "Alternative Wellness",
                fullName: "Dr. A. Sciuto - Modern Alternative Wellness",
                color: "#319795",
                category: "Wellness/Alternative",
                characteristics: ["integrative", "alternative-therapies", "holistic", "personalized", "natural-approach"]
            }
        ];
        // Detailed persona data from spreadsheet
        const personasDetail = {
            "1": {
                        "id": 1,
                        "doctor_name": "Dr. A. Joe",
                        "name": "Budget-Friendly Everyday Ortho",
                        "positioning": "Practical, straightforward, cost-conscious. Focuses heavily on affordability, convenience, and accessibility. Value-driven orthodontic care that removes financial barriers while maintaining quality treatment.",
                        "messaging": "Leads with price, financing, and convenience\n\"Affordable,\" \"Flexible,\" \"Hassle-Free\"\nAvoids overly clinical or luxurious language\nCORE VOICE: Clear, direct, and value-focused. Honest about pricing, transparent about options. Friendly but straightforward‚Äîno fluff. Emphasize accessibility and removing barriers to care.",
                        "patient_base": "Budget-conscious families\nMixed ages\nValue shoppers\nPrice-sensitive decision makers\nFamilies needing flexible payment options\nPatients who prioritize affordability",
                        "example_clients": "EP\nTennessee",
                        "examples_wild": "https://www.biltmoredentalcenter.com/",
                        "copy_dos_donts": "WORDS TO USE: Affordable, Budget-friendly, Flexible payments, Payment plans, Value, Accessible, Convenient, No-hassle, Straightforward, Clear pricing, Low monthly payments, Same-day appointments, Easy scheduling, Fast service, Quality care within budget\n\nWORDS TO AVOID: Luxury, Premium, Exclusive, High-end, Boutique, Elite, Spa-like, Indulgent, Bespoke, Artisanal, Curated, Concierge\n\nMESSAGING EMPHASIS:\nPrimary: Affordability, payment flexibility, convenience\nSecondary: Quality care, accessibility, transparency\nAvoid: Minimizing quality, apologizing for being budget-friendly, over-complicating\n\nOFFER HANDLING: Offers are central to this persona. Lead with price, discounts, payment plans. Be clear and prominent. No-interest financing, seasonal specials, family discounts all appropriate.\n\nEMOTIONAL OUTCOME: Reader should feel relieved that quality orthodontic care is within reach financially. Confident they can afford treatment without guilt.\n\nCTA RULES: Direct and action-oriented. Clear value proposition. \"Get started for $X/month\" or \"Free consultation‚Äîlearn your options.\" Emphasize ease and affordability.",
                        "moodboard_link": "https://pin.it/6H6sVFHSS",
                        "typography": "Sans-Serif Fonts: Open Sans, Roboto, Lato\nWeight: Regular to Semi-Bold\nStyle: Clear, highly readable, straightforward\nHierarchy: Simple, no decorative elements",
                        "imagery": "\u2022 Real families in everyday settings\n\u2022 Diverse age groups together\n\u2022 Casual clothing, natural smiles\n\u2022 Local community vibes\n\u2022 Before/after when emphasizing value\n\u2022 Stock photos OK if authentic-looking",
                        "layout": "\u2022 Efficient use of space - minimal waste\n\u2022 Grid-based, organized\n\u2022 Clear visual hierarchy\n\u2022 CTA prominent and easy to find\n\u2022 Information-dense but not cluttered\n\u2022 Mobile-first thinking",
                        "visual_tone": "\u2022 Practical and no-nonsense\n\u2022 Approachable and friendly\n\u2022 Trustworthy without being fancy\n\u2022 Direct and honest\n\u2022 Value-focused",
                        "iconography": "\u2022 Simple line icons\n\u2022 Dollar signs, calendars, checkmarks\n\u2022 Location pins\n\u2022 Clear, functional symbols\n\u2022 No overly decorative elements",
                        "texture": "\u2022 Minimal textures\n\u2022 Flat or subtle gradients\n\u2022 Clean backgrounds\n\u2022 Occasional paper texture for warmth\n\u2022 Avoid heavy patterns",
                        "design_principles": "\u2022 Clarity over creativity\n\u2022 Accessibility first\n\u2022 Price/value prominently featured\n\u2022 Easy-to-scan information\n\u2022 Strong CTAs\n\u2022 Functional > Fancy",
                        "avoid": "\u2022 Luxury aesthetics\n\u2022 Overly minimal/sparse layouts\n\u2022 Complex typography\n\u2022 Abstract imagery\n\u2022 Excessive white space\n\u2022 Premium color palettes (golds, deep purples)"
            },
            "2": {
                        "id": 2,
                        "doctor_name": "Dr. M. Rogers",
                        "name": "Family-Focused Community Ortho",
                        "positioning": "Warm, welcoming, approachable. The 'local favorite' that takes care of kids, teens, and parents. Community-oriented family practice that emphasizes trust, comfort, and multi-generational care.",
                        "messaging": "Leads with comfort, trust, and family care\nBalanced budget messaging\nAvoids overly serious or premium language\nCORE VOICE: Warm, friendly, like talking to a trusted neighbor. Multi-generational appeal‚Äîspeaks to both kids and parents. Community-minded, locally rooted. Comfortable and familiar, never intimidating.",
                        "patient_base": "Families with kids & teens\nRural + suburban markets\nCommunity-driven parents\nMulti-generational families\nLocal community members\nFamilies seeking trusted, familiar care",
                        "example_clients": "Aloha\nMeason",
                        "examples_wild": "https://www.biltmoredentalcenter.com/",
                        "copy_dos_donts": "WORDS TO USE: Family, Community, Neighbors, Local, Generations, Together, Trust, Comfort, Welcome, Home, Familiar, Friendly, Caring, Your family, Our family, All ages, Everyone, Togetherness, Small-town values, Compassionate\n\nWORDS TO AVOID: Cutting-edge, Revolutionary, Disruptive, High-tech only (tech is fine, but don't lead with it), Urban, Metropolitan, Exclusive, Members-only, Elite\n\nMESSAGING EMPHASIS:\nPrimary: Family togetherness, community trust, comfort\nSecondary: Multi-generational care, local roots, accessibility\nAvoid: Overly corporate feel, exclusivity, intimidating clinical language\n\nOFFER HANDLING: Family-focused offers work well. \"Family discount,\" \"Bring the whole family,\" seasonal community events. Keep pricing approachable but don't lead with deep discounts‚Äîemphasize value and trust instead.\n\nEMOTIONAL OUTCOME: Reader should feel like they've found \"their\" orthodontist‚Äîthe one they'll recommend to neighbors and friends. Warm, welcomed, part of a community.\n\nCTA RULES: Warm and invitational. \"Join our practice family,\" \"Schedule for your whole family,\" \"Come meet our team.\" Emphasize relationship over transaction.",
                        "moodboard_link": "https://pin.it/5ojJdS3I8",
                        "typography": "Sans-Serif: Nunito, Poppins, Quicksand\nWeight: Regular to Bold\nStyle: Rounded, friendly, welcoming\nPersonality: Warm without being childish",
                        "imagery": "\u2022 Multi-generational families\n\u2022 Kids AND parents featured equally\n\u2022 Community events, local settings\n\u2022 Candid, genuine moments\n\u2022 Small-town/neighborhood vibes\n\u2022 Group shots, togetherness\n\u2022 Natural outdoor settings",
                        "layout": "\u2022 Balanced and welcoming\n\u2022 Not too tight, not too sparse\n\u2022 Friendly frame and borders\n\u2022 Photos take center stage\n\u2022 Warm, inviting negative space\n\u2022 Symmetrical or near-symmetrical",
                        "visual_tone": "\u2022 Warm and neighborly\n\u2022 Trusted family friend\n\u2022 Supportive and caring\n\u2022 Community-minded\n\u2022 Generational appeal",
                        "iconography": "\u2022 Soft, rounded icons\n\u2022 Families, homes, hearts\n\u2022 Calendar/appointment symbols\n\u2022 Community symbols\n\u2022 Slightly more playful than clinical",
                        "texture": "\u2022 Soft, organic textures\n\u2022 Light wood grain\n\u2022 Subtle patterns (dots, gentle waves)\n\u2022 Paper/craft elements (sparingly)\n\u2022 Warm overlays",
                        "design_principles": "\u2022 Warmth in every element\n\u2022 Inclusive design (all ages)\n\u2022 Community connection visible\n\u2022 Trust-building through familiarity\n\u2022 Balanced professional + personal\n\u2022 Comfort emphasized",
                        "avoid": "\u2022 Too corporate/clinical\n\u2022 Cold color schemes\n\u2022 Overly polished/studio photography\n\u2022 Exclude any age group\n\u2022 Ultra-modern minimalism\n\u2022 Intimidating medical imagery\n\u2022 Aesthetic before/afters"
            },
            "3": {
                        "id": 3,
                        "doctor_name": "Dr. K. Clarkson",
                        "name": "Adult Cosmetic-Focused Aesthetic Ortho",
                        "positioning": "Modern, aesthetic, image-conscious. Appeals to professionals and adults who want subtle, cosmetic-forward treatment. Sophisticated urban practice focused on discreet, results-driven care for adult lifestyles.",
                        "messaging": "Leads with cosmetic results, discreet options, expertise\nPrice is secondary\nAvoids kid-focused messaging\nCORE VOICE: Sophisticated, professional, aesthetic-focused. Speaks to image-conscious adults. Minimal, modern, confident. Emphasize discretion, cosmetic outcomes, lifestyle integration. Never childish or family-oriented.",
                        "patient_base": "Adults 25‚Äì55\nCosmetic-driven patients\nProfessionals\nUrban dwellers\nImage-conscious individuals\nPatients seeking discreet treatment",
                        "example_clients": "Mackenzie\nSmiles",
                        "examples_wild": "https://www.docriano.com/ | https://ferrariorthodontics.com/who-we-serve/invisalign-adult-braces/",
                        "copy_dos_donts": "WORDS TO USE: Discreet, Subtle, Invisible, Clear aligners, Aesthetic, Cosmetic, Professional, Confident smile, Image, Modern, Sleek, Sophisticated, Results, Transformation, Lifestyle, Convenient for professionals, Virtual consultations, Minimal office visits\n\nWORDS TO AVOID: Kids, Family, Children, Braces (unless qualified as \"modern\" or \"invisible\"), Traditional orthodontics, Cute, Fun, Playful, Cartoon imagery, Pediatric, Budget, Affordable (don't lead with price)\n\nMESSAGING EMPHASIS:\nPrimary: Cosmetic results, discretion, professional lifestyle fit\nSecondary: Expertise, modern technology, convenience\nAvoid: Kid/family focus, budget emphasis, traditional orthodontic imagery\n\nOFFER HANDLING: Light touch on offers. Seasonal promotions okay but frame as exclusive opportunities, not discounts. Virtual consultation offers work well. Emphasize convenience and results over price.\n\nEMOTIONAL OUTCOME: Reader should feel this is exactly what they've been looking for‚Äîsophisticated, adult-focused care that fits their professional lifestyle and aesthetic goals.\n\nCTA RULES: Sleek and professional. \"Schedule your virtual consultation,\" \"See your transformation,\" \"Discover discreet options.\" Never \"family special\" or kid-focused language.",
                        "moodboard_link": "https://pin.it/2F9rGhpob",
                        "typography": "Modern Sans-Serif: Montserrat, Avenir, Proxima Nova\nWeight: Light to Medium (elegant, not heavy)\nStyle: Sleek, sophisticated, minimal\nOptional: Elegant Serif for headlines (Playfair, Cormorant)",
                        "imagery": "\u2022 Adults 25-55 in professional settings\n\u2022 Subtle smile close-ups\n\u2022 Lifestyle shots (work, social, dating)\n\u2022 Minimal visibility of appliances\n\u2022 Before/after focus on aesthetic improvement\n\u2022 Black & white or muted color grades\n\u2022 Urban, modern environments",
                        "layout": "\u2022 Generous white space\n\u2022 Asymmetric, modern layouts\n\u2022 Minimalist compositions\n\u2022 Strong focal points\n\u2022 High contrast\n\u2022 Clean lines and edges\n\u2022 Magazine editorial feel",
                        "visual_tone": "\u2022 Sophisticated and confident\n\u2022 Discreet and subtle\n\u2022 Aspirational but achievable\n\u2022 Professional and modern\n\u2022 Image-conscious without vanity",
                        "iconography": "\u2022 Minimal line icons\n\u2022 Geometric shapes\n\u2022 Subtle/invisible aligner imagery\n\u2022 Lips, smile outlines (abstract)\n\u2022 Professional briefcase, coffee cup symbols\n\u2022 Ultra-thin line weights",
                        "texture": "\u2022 Smooth, clean surfaces\n\u2022 Subtle gradients (gray to white)\n\u2022 Marble or concrete textures (subtle)\n\u2022 Metallic sheens (gold/rose gold)\n\u2022 Avoid busy patterns entirely",
                        "design_principles": "\u2022 Less is more\n\u2022 Sophistication through restraint\n\u2022 Cosmetic focus, never clinical\n\u2022 Lifestyle integration\n\u2022 Discretion emphasized\n\u2022 Quality materials/finishes visible",
                        "avoid": "\u2022 Bright, playful colors\n\u2022 Child-focused imagery\n\u2022 Traditional orthodontic imagery\n\u2022 Price/budget messaging\n\u2022 Busy layouts\n\u2022 Cheesy stock photos\n\u2022 Heavy text blocks"
            },
            "4": {
                        "id": 4,
                        "doctor_name": "Dr. C. Yang",
                        "name": "High-Expertise Clinical Ortho",
                        "positioning": "Authority, precision, and clinical depth (not luxury boutique). Ideal for offices emphasizing board certification, experience, complex cases. Expert-driven practice focused on clinical excellence and proven outcomes.",
                        "messaging": "Leads with credentials, successful outcomes, quality\nOffers are minimal or positioned as \"seasonal\"\nAvoids overly playful or budget-heavy tone\nCORE VOICE: Authoritative, credible, clinical. Emphasize expertise, credentials, proven results. Professional and serious‚Äînot warm and fuzzy. Speak to those seeking the best clinical care, not just any orthodontist.",
                        "patient_base": "Adults seeking expertise\nParents of complex-case teens\nReferrals from general dentists\nPatients with difficult cases\nQuality-focused decision makers\nThose seeking specialized expertise",
                        "example_clients": "Wilson\nPayne",
                        "examples_wild": "https://www.ucsfdentalcenter.org/ | https://www.todorthodontics.com/",
                        "copy_dos_donts": "WORDS TO USE: Board-certified, Expertise, Experience, Specialized, Complex cases, Clinical excellence, Proven results, Advanced training, Precision, Credentials, Successful outcomes, Evidence-based, Quality, Referrals welcome, Specialist, Expert care\n\nWORDS TO AVOID: Budget, Affordable payment plans (as primary message), Fun, Playful, Cutesy, Trendy, Fast/quick fixes, Cookie-cutter, One-size-fits-all, Gimmicky, Promotional, Sale\n\nMESSAGING EMPHASIS:\nPrimary: Credentials, expertise, clinical outcomes\nSecondary: Quality, precision, specialized care\nAvoid: Price-driven messaging, playful tone, casual approach\n\nOFFER HANDLING: Minimal promotional offers. If offers exist, frame as \"seasonal courtesy\" or \"new patient welcome,\" never as discounts or sales. Emphasize complimentary consultation to assess complex cases.\n\nEMOTIONAL OUTCOME: Reader should feel confident they've found the expert they need‚Äîsomeone with credentials and experience to handle their case properly.\n\nCTA RULES: Professional and direct. \"Schedule an expert consultation,\" \"Discuss your case with Dr. Yang,\" \"Learn about our specialized approach.\" Emphasize expertise over promotions.",
                        "moodboard_link": "https://pin.it/45xobIREu",
                        "typography": "Professional Sans-Serif: Helvetica, Arial, Open Sans\nOptional Serif: Georgia, Merriweather (for credentials)\nWeight: Regular to Bold\nStyle: Authoritative, clear, professional\nNo playful or decorative fonts",
                        "imagery": "\u2022 Doctor in professional attire/white coat\n\u2022 Credentials and certifications visible\n\u2022 Clinical setting, modern equipment\n\u2022 Complex case transformations\n\u2022 Detailed before/after documentation\n\u2022 Professional headshots\n\u2022 Technical diagrams/x-rays (when appropriate)\n\u2022 Awards, publications",
                        "layout": "\u2022 Structured and organized\n\u2022 Grid-based, systematic\n\u2022 Information hierarchy clear\n\u2022 Credentials prominently placed\n\u2022 Data/statistics visualized\n\u2022 Professional margins\n\u2022 Academic/medical journal influence",
                        "visual_tone": "\u2022 Authoritative and expert\n\u2022 Precise and clinical\n\u2022 Trustworthy through credibility\n\u2022 Serious but not cold\n\u2022 Evidence-based\n\u2022 Confidence through competence",
                        "iconography": "\u2022 Clinical, precise icons\n\u2022 Medical symbols\n\u2022 Certification badges\n\u2022 Graph/chart elements\n\u2022 Precision measurement tools\n\u2022 Shield (trust/protection)\n\u2022 Clean, professional line work",
                        "texture": "\u2022 Clean, clinical surfaces\n\u2022 Minimal texture\n\u2022 Subtle fabric (lab coat)\n\u2022 Medical grade finishes\n\u2022 Avoid decorative elements",
                        "design_principles": "\u2022 Credentials front and center\n\u2022 Evidence-based messaging\n\u2022 Professional standards visible\n\u2022 Technical expertise demonstrated\n\u2022 Quality over quantity\n\u2022 Systematic approach shown\n\u2022 Results speak louder than marketing",
                        "avoid": "\u2022 Overly promotional tone\n\u2022 Casual imagery\n\u2022 Playful colors or fonts\n\u2022 Budget/price focus\n\u2022 Trendy design elements\n\u2022 Cartoon or overly simplified visuals\n\u2022 Informal language"
            },
            "5": {
                        "id": 5,
                        "doctor_name": "Dr. G. House",
                        "name": "Premium Family Ortho",
                        "positioning": "Warm, modern, high-quality practice that serves both families and adults. They look polished and capable, but not formal or exclusive. Their premium nature comes from reputation, treatment outcome, patient experience, consistency, and expertise. Quality-focused family practice that feels accessible yet elevated.",
                        "messaging": "Leads with family trust + clinical confidence and highlights\nExpertise, Outcomes, Comfort, Convenience, Technology that supports quality\nPricing/Offers:Light but acceptable\nCORE VOICE: Polished but approachable. Confident quality without pretension. Modern, professional warmth. Speaks to families who want the best but don't want to feel excluded or judged. Premium accessible‚Äînot exclusive.",
                        "patient_base": "Middle to upper-middle income families\nParents seeking a high-quality but accessible practice\nAdults wanting Invisalign/Aligner treatments in a warm, modern environment\nSuburban + growing urban markets\nQuality-conscious families\nProfessionals with families",
                        "example_clients": "Chang\nKinser\nTeam\nBowman\nUptown",
                        "examples_wild": "https://www.broadwaysmilesdentistry.com/ | https://www.barandsmithdental.com/",
                        "copy_dos_donts": "WORDS TO USE: Quality, Modern, Exceptional, Comprehensive, Trusted, Excellence, Advanced technology, Beautiful smiles, Confidence, Personalized, Family-focused, Professional, Welcoming, Contemporary, Experience, Comfort-focused, Proven outcomes\n\nWORDS TO AVOID: Budget, Cheap, Discount, Basic, Entry-level, Exclusive, Elite, Members-only, Luxury (too high-end), Spa (too leisure), Boutique (too exclusive), Ultra-premium\n\nMESSAGING EMPHASIS:\nPrimary: Quality outcomes, family trust, modern approach\nSecondary: Technology, comfort, expertise\nAvoid: Price-driven messaging, exclusivity, overly casual tone\n\nOFFER HANDLING: Light promotional offers acceptable‚Äîseasonal courtesy, complimentary consultations, family benefits. Frame as welcoming, not desperate. Emphasize value of quality care, not discounts.\n\nEMOTIONAL OUTCOME: Reader should feel they've found the \"just right\" practice‚Äîhigh quality without being intimidating, professional without being cold, modern without being trendy.\n\nCTA RULES: Confident and welcoming. \"Experience the difference,\" \"Schedule your family consultation,\" \"Discover comprehensive care.\" Balance professionalism with warmth.",
                        "moodboard_link": "https://pin.it/1GvrCEx1g",
                        "typography": "Modern Sans-Serif: Quicksand, Sofia Pro, Circular\nWeight: Regular to Semi-Bold\nStyle: Polished but approachable\nPersonality: Confident, warm, refined without being stuffy",
                        "imagery": "\u2022 Diverse, modern families\n\u2022 Professional but warm settings\n\u2022 Contemporary office spaces\n\u2022 Both kids and adults feeling comfortable\n\u2022 Genuine smiles and interactions\n\u2022 Lifestyle + clinical blend\n\u2022 High production value, natural lighting\n\u2022 Modern technology visible",
                        "layout": "\u2022 Balanced white space (not excessive)\n\u2022 Thoughtful composition\n\u2022 Quality photography featured prominently\n\u2022 Clean but not minimal\n\u2022 Professional grid system\n\u2022 Breathing room without feeling sparse\n\u2022 Premium but accessible feel",
                        "visual_tone": "\u2022 Polished and capable\n\u2022 Warm but not casual\n\u2022 Confident excellence\n\u2022 Quality-focused\n\u2022 Modern family values\n\u2022 Approachable premium",
                        "iconography": "\u2022 Refined, modern icons\n\u2022 Family symbols (updated, modern)\n\u2022 Technology indicators\n\u2022 Quality badges (subtle)\n\u2022 Balance clinical + friendly\n\u2022 Medium line weights",
                        "texture": "\u2022 Quality materials suggested\n\u2022 Soft, premium fabrics\n\u2022 Natural wood (light, modern)\n\u2022 Stone/marble (subtle)\n\u2022 Avoid overly rustic or industrial",
                        "design_principles": "\u2022 Quality evident in every detail\n\u2022 Modern meets timeless\n\u2022 Family-inclusive design\n\u2022 Technology as enabler of care\n\u2022 Professional warmth\n\u2022 Consistent brand experience\n\u2022 Both accessible AND premium",
                        "avoid": "\u2022 Budget aesthetics\n\u2022 Ultra-luxury exclusivity\n\u2022 Cold corporate feel\n\u2022 Overly trendy elements\n\u2022 Cheap stock photography\n\u2022 Cluttered layouts\n\u2022 Single demographic focus"
            },
            "6": {
                        "id": 6,
                        "doctor_name": "Dr. V. Frizzle",
                        "name": "The Wellness Educator",
                        "positioning": "Teacher, guide, long-term wellness partner. High emphasis on systemic health, root-cause awareness, and patient empowerment. Education-first practice focused on whole-body connections and patient understanding.",
                        "messaging": "Leads with education and long-term health\nAvoids hype and overly \"salesy\" feel\nCORE VOICE: Educational, empowering, knowledgeable guide. Patient-centered teaching approach. Clear explanations without condescension. Emphasize understanding, not just compliance. Think \"health educator\" not \"salesperson.\"",
                        "patient_base": "Adults\nWellness-forward individuals\nPeople with chronic concerns or sensitivities\nHealth-conscious decision makers\nPatients seeking to understand their care\nLifelong learners",
                        "example_clients": "Virginia",
                        "examples_wild": "https://www.lyfesmilesortho.com/",
                        "copy_dos_donts": "WORDS TO USE: Education, Understanding, Empower, Learn, Knowledge, Systemic health, Whole-body, Root cause, Long-term wellness, Connection, Informed decisions, Partner in your health, Evidence-based, Comprehensive approach, Patient-centered, Your health journey\n\nWORDS TO AVOID: Quick fix, Fast results, Magic solution, Secret, Breakthrough (overused), Revolutionary (hype), Limited time, Act now, Don't wait, Sales language, Pushy tone, Overly spiritual/alternative jargon\n\nMESSAGING EMPHASIS:\nPrimary: Education, patient empowerment, systemic health\nSecondary: Long-term wellness, root-cause approach\nAvoid: Sales tactics, quick fixes, hype, pseudoscience\n\nOFFER HANDLING: Educational offers work well‚Äîcomplimentary health assessments, educational consultations, information sessions. Frame as learning opportunities, not sales pitches.\n\nEMOTIONAL OUTCOME: Reader should feel empowered and informed‚Äîlike they've finally found someone who will teach them, not just treat them. Confident in understanding their own health.\n\nCTA RULES: Educational and empowering. \"Learn about your oral health,\" \"Discover the connections,\" \"Schedule an educational consultation.\" Emphasize knowledge over urgency.",
                        "moodboard_link": "https://pin.it/51p2QX2mK",
                        "typography": "Clean Sans-Serif: Lato, Source Sans Pro, Karla\nWeight: Regular, emphasis on readability\nStyle: Educational, clear, approachable\nHierarchy: Clear for scanning information",
                        "imagery": "\u2022 Educational diagrams and infographics\n\u2022 Natural elements (plants, nature)\n\u2022 Cross-section health illustrations\n\u2022 Whole-body health concepts\n\u2022 Teacher/guide positioning\n\u2022 Lifestyle wellness shots\n\u2022 No overly clinical imagery\n\u2022 Real education happening",
                        "layout": "\u2022 Information-organized layouts\n\u2022 Clear sections for learning\n\u2022 Infographic-style elements\n\u2022 Whitespace for comprehension\n\u2022 Sequential/flow-based design\n\u2022 Charts and visual data\n\u2022 Scannable content blocks",
                        "visual_tone": "\u2022 Educational and empowering\n\u2022 Knowledgeable guide\n\u2022 Patient-centered\n\u2022 Root-cause focused\n\u2022 Long-term wellness\n\u2022 Natural, not \"crunchy\"",
                        "iconography": "\u2022 Educational symbols\n\u2022 Body systems icons\n\u2022 Natural elements (leaf, etc.)\n\u2022 Connection/link symbols\n\u2022 Growth/improvement arrows\n\u2022 Holistic health symbols\n\u2022 Clear, informative style",
                        "texture": "\u2022 Natural textures (paper, linen)\n\u2022 Organic patterns (subtle)\n\u2022 Earth elements\n\u2022 Soft, matte finishes\n\u2022 Avoid synthetic/glossy",
                        "design_principles": "\u2022 Education first, sales second\n\u2022 Evidence-based information\n\u2022 Whole-body connections visible\n\u2022 Patient empowerment\n\u2022 Long-term thinking\n\u2022 Natural, not alternative\n\u2022 Credible wellness approach",
                        "avoid": "\u2022 Hard sales tactics\n\u2022 Overly spiritual imagery\n\u2022 Pseudoscience aesthetics\n\u2022 Too clinical/medical\n\u2022 Intimidating information\n\u2022 Quick-fix messaging\n\u2022 Disconnected dental focus"
            },
            "7": {
                        "id": 7,
                        "doctor_name": "D. K. Kardashian",
                        "name": "Luxury Wellness Practice",
                        "positioning": "Spa-like, premium, elevated holistic care. High-end experience without spiritual overtones. Luxury wellness practice where the experience is the product‚Äîrefined, serene, premium care as self-care.",
                        "messaging": "Leads with comfort, experience, premium care\nEducates lightly ‚Äî more about experience than teaching\nCORE VOICE: Refined, serene, elevated. Spa-like tranquility meets premium healthcare. Minimal but luxurious language. Emphasize experience, comfort, and premium service. Never rushed, never budget-conscious, never apologetic about luxury.",
                        "patient_base": "Adults 30‚Äì65\nPremium market consumers\nCosmetic + wellness-minded patients\nHigh-income professionals\nExperience-focused individuals\nPatients seeking elevated care",
                        "example_clients": "Renew",
                        "examples_wild": "https://eliteorthodonticsgroup.com/",
                        "copy_dos_donts": "WORDS TO USE: Luxury, Premium, Elevated, Serene, Spa-like, Refined, Exclusive, Personalized, Bespoke, Tranquil, Exceptional, Curated, Boutique, Wellness retreat, Self-care, Restorative, Peaceful, Premium experience, White-glove service\n\nWORDS TO AVOID: Budget, Affordable, Discount, Sale, Fast, Quick, Rush, Busy, Hectic, Clinical (too medical), Sterile, Corporate, Mass-market, Cookie-cutter, Basic, Standard\n\nMESSAGING EMPHASIS:\nPrimary: Premium experience, serenity, luxury wellness\nSecondary: Personalized care, comfort, exclusivity\nAvoid: Price discussions (price is not a selling point), rush/urgency, budget language\n\nOFFER HANDLING: Minimal to no promotional offers. If any, frame as \"exclusive opportunities\" for select clients or \"VIP experiences.\" Never discounts or sales‚Äîdevalues the luxury positioning.\n\nEMOTIONAL OUTCOME: Reader should feel they've discovered an elevated experience‚Äîlike a wellness retreat, not a dental office. Feel pampered, valued, and worthy of premium care.\n\nCTA RULES: Elegant and exclusive. \"Reserve your consultation,\" \"Experience elevated care,\" \"Discover our sanctuary.\" Never \"book now\" or urgent language‚Äîthat's beneath the brand.",
                        "moodboard_link": "https://pin.it/66Mx0suqF",
                        "typography": "Elegant Serif: Cormorant, Playfair Display, Lora\nSans-Serif: Brandon Grotesque, Avenir (for body)\nWeight: Light to Regular (elegant, refined)\nStyle: Sophisticated, spa-like, calming",
                        "imagery": "\u2022 Spa-like environments\n\u2022 Serene, peaceful settings\n\u2022 Luxury materials (marble, brass)\n\u2022 Soft, diffused lighting\n\u2022 Premium experience moments\n\u2022 Relaxation and comfort\n\u2022 High-end lifestyle integration\n\u2022 Minimal clutter, zen-like\n\u2022 Adult-focused (30-65)",
                        "layout": "\u2022 Generous white space (luxury breathing room)\n\u2022 Elegant, flowing compositions\n\u2022 Centered or asymmetric balance\n\u2022 Premium margins\n\u2022 Minimal elements per layout\n\u2022 High-end editorial feel\n\u2022 Spa brochure aesthetic",
                        "visual_tone": "\u2022 Elevated and refined\n\u2022 Serene and calming\n\u2022 Premium experience focus\n\u2022 Exclusive but welcoming\n\u2022 Wellness as luxury\n\u2022 Spa-like tranquility",
                        "iconography": "\u2022 Minimal, elegant icons\n\u2022 Spa/wellness symbols\n\u2022 Natural elements (refined)\n\u2022 Very thin line weights\n\u2022 Subtle, understated\n\u2022 Premium finishes suggested",
                        "texture": "\u2022 Soft, luxurious textures\n\u2022 Linen, silk suggestions\n\u2022 Marble (white, soft veining)\n\u2022 Wood (light, refined)\n\u2022 Watercolor washes (subtle)\n\u2022 Avoid busy or rough textures",
                        "design_principles": "\u2022 Experience over everything\n\u2022 Luxury through restraint\n\u2022 Wellness as self-care\n\u2022 Premium without pretension\n\u2022 Serenity in every element\n\u2022 Quality of experience emphasized\n\u2022 Spa standards applied",
                        "avoid": "\u2022 Clinical medical aesthetics\n\u2022 Budget messaging of any kind\n\u2022 Busy layouts or colors\n\u2022 Hard edges or aggressive design\n\u2022 Family/kids imagery\n\u2022 Overly spiritual elements\n\u2022 Discount/promotional feel"
            },
            "8": {
                        "id": 8,
                        "doctor_name": "Dr. B. Nye",
                        "name": "Science-Driven Holistic Clinic",
                        "positioning": "Bridges functional medicine and modern dentistry. Emphasizes data, testing, whole-body diagnostics. Evidence-based holistic practice that combines scientific rigor with integrative approach‚Äîcredible wellness through research and testing.",
                        "messaging": "Leads with expertise, diagnostics, research-backed care\nModerate price language\nAvoids overly \"spiritual\" visuals or terminology\nCORE VOICE: Scientific yet holistic. Data-driven but whole-body focused. Credible alternative‚Äîuses research, testing, and evidence to support integrative approaches. Professional, modern, evidence-based. Never pseudoscientific or purely \"alternative.\"",
                        "patient_base": "Adults\nHealth-conscious professionals\nComplex case patients\nEvidence-minded wellness seekers\nPatients wanting holistic care with scientific backing\nThose seeking functional medicine approach",
                        "example_clients": "Nautical",
                        "examples_wild": "https://www.drmelanieorthodontics.com/",
                        "copy_dos_donts": "WORDS TO USE: Evidence-based, Research-backed, Data-driven, Testing, Diagnostics, Functional medicine, Whole-body health, Scientific approach, Integrative, Systems-based, Comprehensive assessment, Advanced testing, Root-cause analysis, Personalized protocols, Clinical evidence\n\nWORDS TO AVOID: Energy healing, Spiritual, Mystical, Unproven, Alternative (without \"evidence-based\" qualifier), Miracle cure, Secret formula, Ancient wisdom (alone‚Äîokay if paired with modern research), Crystal/chakra/aura language, Pseudoscience terms\n\nMESSAGING EMPHASIS:\nPrimary: Scientific evidence, diagnostic approach, data\nSecondary: Holistic/whole-body connections, integrative methods\nAvoid: Pseudoscience, purely alternative language, unsubstantiated claims\n\nOFFER HANDLING: Diagnostic/assessment offers work well‚Äîcomplimentary health screenings, comprehensive evaluations. Frame as data-gathering opportunities. Moderate pricing discussions‚Äînot budget-focused but not luxury either.\n\nEMOTIONAL OUTCOME: Reader should feel they've found credible holistic care‚Äîsomeone who takes whole-body health seriously but backs it with science. Confident in evidence-based approach.\n\nCTA RULES: Scientific yet accessible. \"Schedule your comprehensive assessment,\" \"Discover the science behind whole-body health,\" \"Learn about evidence-based integrative care.\" Emphasize testing and data.",
                        "moodboard_link": "https://pin.it/IDzlbX6gX",
                        "typography": "Modern Sans-Serif: Inter, IBM Plex Sans, Work Sans\nWeight: Regular to Semi-Bold\nStyle: Scientific, modern, credible\nClean and data-friendly",
                        "imagery": "\u2022 Diagnostic technology and testing\n\u2022 Research/lab elements\n\u2022 Data visualization and charts\n\u2022 Modern clinical environments\n\u2022 Natural health elements (balanced)\n\u2022 Health professionals analyzing data\n\u2022 Evidence-based imagery\n\u2022 Scientific papers/research\n\u2022 Whole-body health connections (with data)",
                        "layout": "\u2022 Data-forward design\n\u2022 Organized, systematic\n\u2022 Information hierarchy clear\n\u2022 Scientific credibility visible\n\u2022 Charts and graphs integrated\n\u2022 Modern medical aesthetic\n\u2022 Natural elements as accents\n\u2022 Research paper influence",
                        "visual_tone": "\u2022 Scientific and credible\n\u2022 Research-backed\n\u2022 Modern medical approach\n\u2022 Holistic through data\n\u2022 Expert but accessible\n\u2022 Evidence-based confidence",
                        "iconography": "\u2022 Scientific symbols (molecules, etc.)\n\u2022 Diagnostic tool icons\n\u2022 Data/chart elements\n\u2022 Body systems (scientific style)\n\u2022 Testing equipment\n\u2022 Research/study symbols\n\u2022 Clean, modern line work",
                        "texture": "\u2022 Clean, modern surfaces\n\u2022 Subtle technical patterns\n\u2022 Natural elements (refined)\n\u2022 Medical-grade finishes\n\u2022 Data visualization textures\n\u2022 Avoid overly organic/rustic",
                        "design_principles": "\u2022 Data and diagnostics prominent\n\u2022 Scientific credibility first\n\u2022 Holistic through evidence\n\u2022 Modern medical standards\n\u2022 Research-backed claims\n\u2022 Whole-body connections proven\n\u2022 Technology as diagnostic tool",
                        "avoid": "\u2022 Pseudoscience aesthetics\n\u2022 Overly spiritual imagery\n\u2022 Unsubstantiated wellness claims\n\u2022 Traditional alternative medicine look\n\u2022 Budget or casual presentation\n\u2022 Disconnected natural elements\n\u2022 Missing scientific credibility"
            },
            "9": {
                        "id": 9,
                        "doctor_name": "Dr. McStuffins",
                        "name": "Pediatric Wellness Practice",
                        "positioning": "Gentle, preventive pediatric dental care focused on healthy development and reducing parental anxiety. Child-centered, developmentally-focused practice emphasizing prevention, airway health, and early intervention. Partners with parents to support healthy growth and development.",
                        "messaging": "Leads with child development and preventive care\nEmphasizes early intervention and airway health\nParent education and partnership\nGentle, child-friendly approach without being overly cutesy\nCORE VOICE: Gentle, friendly, and reassuring voice designed for parents. Calm, warm, approachable language. Frame wellness through growth, development, and early support. Focus on reassurance and clarity.",
                        "patient_base": "Parents of young children (ages 3-12)\nFirst-time or early-stage pediatric dental patients\nParents concerned about fear, comfort, and prevention\nPrevention-minded families\nParents concerned about airway/breathing issues\nFamilies seeking a gentle, supportive experience",
                        "example_clients": "Sugarbugs Pediatric Dentistry",
                        "examples_wild": "https://www.lajolladentalwellnesscenter.com/",
                        "copy_dos_donts": "WORDS TO USE: Gentle, Caring, Kind, Welcoming, Friendly team, Your child's comfort, Healthy growth, Growing smiles, Developing teeth, Building healthy habits, Preventive care, Catch things early, Proactive care, For parents, Clear answers, Helping you understand, Relaxed environment, Stress-free visits\n\nWORDS TO AVOID: Problems, Damage, Risk, Bad bite, Fix before it's too late, Perfect smile, Aesthetic, Limited-time offer, Big savings, Fix, Correct, Repair\n\nMESSAGING EMPHASIS:\nPrimary: Gentleness, prevention, healthy development\nSecondary: Reassurance, early support, calm experience\nAvoid: Fear-based prevention, adult dentistry comparisons, urgency\n\nOFFER HANDLING: Emphasize reassurance, access, gentle introduction to care. Complimentary or low-pressure entry points acceptable if framed calmly.\n\nEMOTIONAL OUTCOME: Reader should feel calm, reassured, confident they're doing the right thing for their child.\n\nCTA RULES: Gentle, reassuring, parent-led. Emphasize calm introductions and supportive next steps. Avoid urgency, fear, or sales framing.",
                        "moodboard_link": "https://pin.it/64ajhhyzO",
                        "typography": "Friendly Sans-Serif: Nunito, Quicksand, Baloo\nWeight: Regular to Semi-Bold\nStyle: Warm, approachable, professional but playful\nReadable for parent audience",
                        "imagery": "\u2022 Happy, healthy children (diverse ages 3-12)\n\u2022 Parent-child interaction moments\n\u2022 Developmental milestone imagery\n\u2022 Natural play and growth settings\n\u2022 Airway/breathing health visualized simply\n\u2022 Friendly clinical environments designed for kids\n\u2022 Educational diagrams (child development)\n\u2022 Before/after showing healthy development\n\u2022 Avoid overly babyish or cartoon aesthetics",
                        "layout": "\u2022 Clean, organized for parent scanning\n\u2022 Child-friendly color blocking\n\u2022 Educational content clearly sectioned\n\u2022 Welcoming white space\n\u2022 Developmental timelines/charts\n\u2022 Easy-to-understand infographics\n\u2022 Warm, inviting composition",
                        "visual_tone": "\u2022 Nurturing and supportive\n\u2022 Developmentally-focused\n\u2022 Preventive care emphasis\n\u2022 Parent partnership\n\u2022 Professional but approachable\n\u2022 Child-centered without being childish",
                        "iconography": "\u2022 Growth/development symbols\n\u2022 Airway/breathing icons (simplified)\n\u2022 Parent-child connection symbols\n\u2022 Preventive care indicators\n\u2022 Milestone markers\n\u2022 Friendly, rounded icon style\n\u2022 Health and wellness symbols for kids",
                        "texture": "\u2022 Soft, gentle textures\n\u2022 Natural, organic patterns\n\u2022 Playful but refined elements\n\u2022 Warm overlays\n\u2022 Paper/craft textures (sparingly)\n\u2022 Avoid harsh or clinical textures",
                        "design_principles": "\u2022 Child development first\n\u2022 Prevention over correction\n\u2022 Parent education integral\n\u2022 Gentle, supportive approach\n\u2022 Airway health emphasized\n\u2022 Early intervention benefits shown\n\u2022 Professional pediatric standards",
                        "avoid": "\u2022 Overly cutesy/cartoon aesthetics\n\u2022 Traditional braces-focused messaging\n\u2022 Scary or intimidating imagery\n\u2022 Adult-focused language\n\u2022 Ignoring parent perspective\n\u2022 Price-driven messaging\n\u2022 One-size-fits-all approach"
            },
            "10": {
                        "id": 10,
                        "doctor_name": "Dr. A. Sciuto",
                        "name": "Modern Alternative Wellness",
                        "positioning": "Modern, values-driven dental care for wellness-aligned adults and families seeking intentional, low-intervention care. Integrative practice blending alternative therapies with modern orthodontic techniques. Emphasizes personalized, natural approaches while utilizing contemporary methods and technology.",
                        "messaging": "Leads with integrative care and personalized treatment\nHighlights alternative therapies + modern techniques\nNatural, whole-body approach\nAvoids one-size-fits-all treatment mentality\nCORE VOICE: Modern, values-driven, alternative wellness voice. Confident, conversational, grounded, quietly counter-mainstream. Thoughtful, low-intervention approaches. Assume reader is wellness-aware. Calm, reassuring, self-assured‚ÄîNEVER salesy, urgent, or fear-based.",
                        "patient_base": "Wellness-aligned adults and parents\nPatients who prefer low-intervention care\nFamilies who avoid traditional dental marketing\nValues-driven decision-makers\nAdults seeking alternative approaches\nWellness-conscious individuals (25-55)\nPeople preferring natural/holistic methods\nPatients wanting integrative, personalized care",
                        "example_clients": "Radical Wellness\nElite Dental & Wellness",
                        "examples_wild": "https://www.wellnessdentalgroup.com/",
                        "copy_dos_donts": "WORDS TO USE: Gentle, Thoughtful, Supportive care, Mindful, Intentional, Naturally aligned, Whole-body health, Balanced, Wellness-focused, We take a different approach, Designed with intention, Grounded in experience, Fits your lifestyle, Respectful of individual needs\n\nWORDS TO AVOID: Limited time, Act now, Damage, Risk, Problems, Fix, Correct, Before it's too late, Energy healing, Mind-body-spirit, Clinically proven, Board-certified, Medical-grade\n\nMESSAGING EMPHASIS:\nPrimary: Alignment with values, gentle approach, intention\nSecondary: Low-intervention care, respect for natural processes\nAvoid: Over-explaining philosophy, defensiveness, pseudoscience\n\nOFFER HANDLING: Values-aligned and optional, NOT promotional. Frame as invitation to explore a different approach.\n\nEMOTIONAL OUTCOME: Reader should feel aligned, understood, confident they've found care that matches their values.\n\nCTA RULES: Invitational and values-aligned. Encourage exploration without urgency or justification. Avoid discounts, sales language, or defensive framing.",
                        "moodboard_link": "https://pin.it/3YYxJvV65",
                        "typography": "Modern Sans-Serif: Montserrat, Raleway, Poppins\nWeight: Light to Medium\nStyle: Contemporary wellness aesthetic\nClean but organic feeling",
                        "imagery": "\u2022 Integrative therapy sessions\n\u2022 Modern clinical + natural elements blend\n\u2022 Personalized treatment planning\n\u2022 Myofunctional therapy, breathwork\n\u2022 Natural wellness practices\n\u2022 Whole-body connection imagery\n\u2022 Contemporary wellness lifestyle\n\u2022 Individual patient journey focus\n\u2022 Blend of technology + natural approaches",
                        "layout": "\u2022 Balanced modern-organic design\n\u2022 Natural flow with structure\n\u2022 Personalized content sections\n\u2022 Integrative approach visible\n\u2022 Both clinical and wellness elements\n\u2022 Breathable, natural spacing\n\u2022 Contemporary wellness magazine feel",
                        "visual_tone": "\u2022 Integrative and personalized\n\u2022 Modern meets natural\n\u2022 Alternative but credible\n\u2022 Wellness-forward\n\u2022 Individual-focused\n\u2022 Contemporary holistic approach",
                        "iconography": "\u2022 Integration symbols (blend of approaches)\n\u2022 Natural + modern combined icons\n\u2022 Myofunctional therapy symbols\n\u2022 Personalized care indicators\n\u2022 Whole-body wellness icons\n\u2022 Contemporary line work with organic touches\n\u2022 Alternative therapy symbols (modernized)",
                        "texture": "\u2022 Natural-modern blend\n\u2022 Organic textures (refined)\n\u2022 Contemporary wellness materials\n\u2022 Botanical elements (subtle)\n\u2022 Clean with natural warmth\n\u2022 Avoid overly earthy or clinical extremes",
                        "design_principles": "\u2022 Integration over separation\n\u2022 Personalization emphasized\n\u2022 Alternative credibility shown\n\u2022 Modern methods + natural philosophy\n\u2022 Whole-body approach visible\n\u2022 Individual patient journey\n\u2022 Contemporary wellness standards",
                        "avoid": "\u2022 Stereotypical 'crunchy' wellness aesthetics\n\u2022 Purely clinical/conventional approach\n\u2022 Generic treatment messaging\n\u2022 Dismissing alternative methods\n\u2022 Over-spiritualization\n\u2022 Lack of modern credibility\n\u2022 One-size-fits-all solutions"
            }
};


        const overlaps = [
            { source: 2, target: 5, strength: "strong", shared: ["family-oriented", "trust", "multi-generational", "community focus"] },
            { source: 3, target: 7, strength: "strong", shared: ["cosmetic focus", "adult audience", "premium positioning", "sleek design"] },
            { source: 4, target: 8, strength: "strong", shared: ["scientific approach", "diagnostic focus", "expertise", "evidence-based"] },
            { source: 6, target: 8, strength: "strong", shared: ["holistic approach", "root-cause focus", "education", "natural"] },
            { source: 1, target: 2, strength: "medium", shared: ["accessible", "community-oriented", "family-friendly"] },
            { source: 2, target: 6, strength: "medium", shared: ["educational", "warm approach", "patient empowerment"] },
            { source: 3, target: 4, strength: "medium", shared: ["professional", "adult audience", "results-focused"] },
            { source: 5, target: 7, strength: "medium", shared: ["premium positioning", "elevated experience", "quality focus"] },
            { source: 4, target: 5, strength: "medium", shared: ["expertise", "technology", "outcomes focus"] },
            { source: 6, target: 7, strength: "medium", shared: ["holistic wellness", "lifestyle integration", "natural aesthetics"] },
            { source: 1, target: 4, strength: "weak", shared: ["accessible care", "results-focused"] },
            { source: 1, target: 6, strength: "weak", shared: ["patient education", "community wellness"] },
            { source: 3, target: 5, strength: "weak", shared: ["adult audience", "professional approach"] },
            { source: 5, target: 8, strength: "weak", shared: ["comprehensive care", "advanced approach"] },
            { source: 7, target: 8, strength: "weak", shared: ["holistic wellness", "advanced treatments"] },
            // New persona overlaps
            { source: 2, target: 9, strength: "medium", shared: ["family-focused", "child-centered", "parent education", "community approach"] },
            { source: 6, target: 9, strength: "medium", shared: ["wellness education", "preventive care", "patient empowerment", "holistic approach"] },
            { source: 5, target: 9, strength: "weak", shared: ["family appeal", "quality outcomes", "parent partnership"] },
            { source: 8, target: 9, strength: "weak", shared: ["developmental focus", "whole-body health", "preventive approach"] },
            { source: 6, target: 10, strength: "strong", shared: ["wellness education", "holistic approach", "patient empowerment", "natural methods"] },
            { source: 8, target: 10, strength: "medium", shared: ["holistic wellness", "integrative approach", "whole-body focus"] },
            { source: 7, target: 10, strength: "medium", shared: ["wellness focus", "natural aesthetics", "personalized care", "alternative approaches"] },
            { source: 9, target: 10, strength: "weak", shared: ["wellness approach", "natural methods", "individualized care"] }
        ];

        let svg, g, tooltip, zoom;
        let selectedPersona = null;
        let currentFilter = 'all';
        let labelsVisible = true;

        // Initialize
        loadD3()
            .then(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('controls').style.display = 'block';
                initializeVisualization();
            })
            .catch(error => {
                console.error('Error loading D3.js:', error);
                document.getElementById('loading').style.display = 'none';
                const errorDiv = document.getElementById('error-message');
                errorDiv.style.display = 'block';
                errorDiv.innerHTML = `
                    <h3>‚ö†Ô∏è Error Loading Visualization</h3>
                    <p>Could not load D3.js library. Please check your internet connection.</p>
                `;
            });

        function initializeVisualization() {
            tooltip = d3.select('body')
                .append('div')
                .attr('class', 'tooltip');

            const width = document.getElementById('visualization').offsetWidth - 40;
            const height = 800;

            // Setup zoom
            zoom = d3.zoom()
                .scaleExtent([0.5, 3])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });

            svg = d3.select('#visualization')
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .call(zoom);

            g = svg.append('g');

            // Add zoom controls
            const zoomControls = d3.select('#visualization')
                .append('div')
                .attr('class', 'zoom-controls');

            zoomControls.append('button')
                .attr('class', 'zoom-button')
                .text('+')
                .on('click', () => {
                    svg.transition().duration(300).call(zoom.scaleBy, 1.3);
                });

            zoomControls.append('button')
                .attr('class', 'zoom-button')
                .text('‚àí')
                .on('click', () => {
                    svg.transition().duration(300).call(zoom.scaleBy, 0.7);
                });

            // Setup filter buttons
            d3.selectAll('.filter-button').on('click', function() {
                d3.selectAll('.filter-button').classed('active', false);
                d3.select(this).classed('active', true);
                currentFilter = this.dataset.filter;
                updateFilters();
            });

            drawVisualization(width, height);
        }

        function drawVisualization(width, height) {
            g.selectAll('*').remove();

            const clusters = [
                { name: "Budget/Accessible", personas: [1], x: width * 0.2, y: height * 0.3, color: "#3182ce" },
                { name: "Family-Focused", personas: [2, 5], x: width * 0.5, y: height * 0.2, color: "#38a169" },
                { name: "Cosmetic/Aesthetic", personas: [3, 7], x: width * 0.8, y: height * 0.3, color: "#805ad5" },
                { name: "Clinical/Scientific", personas: [4, 8], x: width * 0.35, y: height * 0.65, color: "#d69e2e" },
                { name: "Wellness/Education", personas: [6], x: width * 0.6, y: height * 0.7, color: "#48bb78" },
                { name: "Pediatric/Wellness", personas: [9], x: width * 0.3, y: height * 0.5, color: "#ed64a6" },
                { name: "Wellness/Alternative", personas: [10], x: width * 0.75, y: height * 0.6, color: "#319795" }
            ];

            // Draw cluster circles
            const clusterCircles = g.selectAll('.cluster-circle')
                .data(clusters)
                .enter()
                .append('circle')
                .attr('class', 'cluster-circle')
                .attr('cx', d => d.x)
                .attr('cy', d => d.y)
                .attr('r', 100)
                .attr('fill', d => d.color)
                .attr('opacity', 0.15)
                .attr('stroke', d => d.color)
                .attr('stroke-width', 3);

            // Draw cluster labels
            const clusterLabels = g.selectAll('.cluster-label')
                .data(clusters)
                .enter()
                .append('text')
                .attr('class', 'cluster-label')
                .attr('x', d => d.x)
                .attr('y', d => d.y - 120)
                .attr('text-anchor', 'middle')
                .attr('font-weight', 'bold')
                .attr('font-size', '14px')
                .attr('fill', d => d.color)
                .text(d => d.name)
                .on('click', function(event, d) {
                    highlightCluster(d);
                });

            // Draw links first (so they're behind nodes)
            const links = g.append('g')
                .attr('class', 'links-group')
                .selectAll('.link')
                .data(overlaps)
                .enter()
                .append('line')
                .attr('class', d => `link ${d.strength}`)
                .attr('data-strength', d => d.strength)
                .each(function(d) {
                    // Fix: Handle both number IDs and object references
                    const sourceId = typeof d.source === 'object' ? d.source.id : d.source;
                    const targetId = typeof d.target === 'object' ? d.target.id : d.target;
                    
                    const source = personas.find(p => p.id === sourceId);
                    const target = personas.find(p => p.id === targetId);
                    
                    if (!source || !target) {
                        console.warn('Could not find personas for overlap:', d);
                        return;
                    }
                    
                    const sourceCluster = clusters.find(c => c.personas.includes(source.id));
                    const targetCluster = clusters.find(c => c.personas.includes(target.id));
                    
                    if (sourceCluster && targetCluster) {
                        const sourceAngle = sourceCluster.personas.indexOf(source.id) * (Math.PI * 2 / sourceCluster.personas.length);
                        const targetAngle = targetCluster.personas.indexOf(target.id) * (Math.PI * 2 / targetCluster.personas.length);
                        const sourceOffset = sourceCluster.personas.length > 1 ? 40 : 0;
                        const targetOffset = targetCluster.personas.length > 1 ? 40 : 0;
                        
                        d.x1 = sourceCluster.x + Math.cos(sourceAngle) * sourceOffset;
                        d.y1 = sourceCluster.y + Math.sin(sourceAngle) * sourceOffset;
                        d.x2 = targetCluster.x + Math.cos(targetAngle) * targetOffset;
                        d.y2 = targetCluster.y + Math.sin(targetAngle) * targetOffset;
                    }
                })
                .attr('x1', d => d.x1 || 0)
                .attr('y1', d => d.y1 || 0)
                .attr('x2', d => d.x2 || 0)
                .attr('y2', d => d.y2 || 0)
                .on('mouseover', function(event, d) {
                    const sourceId = typeof d.source === 'object' ? d.source.id : d.source;
                    const targetId = typeof d.target === 'object' ? d.target.id : d.target;
                    const sourceName = personas.find(p => p.id === sourceId).name;
                    const targetName = personas.find(p => p.id === targetId).name;
                    
                    tooltip.transition().duration(200).style('opacity', 1);
                    tooltip.html(`
                        <strong>${sourceName} ‚Üî ${targetName}</strong><br>
                        Overlap Strength: ${d.strength.toUpperCase()}<br>
                        <br><strong>Shared Characteristics:</strong><br>
                        ${d.shared.map(s => `‚Ä¢ ${s}`).join('<br>')}
                    `)
                    .style('left', (event.pageX + 10) + 'px')
                    .style('top', (event.pageY - 10) + 'px');
                })
                .on('mouseout', function() {
                    tooltip.transition().duration(200).style('opacity', 0);
                });

            // Position personas within clusters
            personas.forEach(persona => {
                const cluster = clusters.find(c => c.personas.includes(persona.id));
                if (!cluster) return;
                
                const angle = cluster.personas.indexOf(persona.id) * (Math.PI * 2 / cluster.personas.length);
                const offset = cluster.personas.length > 1 ? 40 : 0;
                persona.x = cluster.x + Math.cos(angle) * offset;
                persona.y = cluster.y + Math.sin(angle) * offset;
            });

            // Draw persona nodes
            const nodes = g.selectAll('.persona-node')
                .data(personas)
                .enter()
                .append('g')
                .attr('class', 'persona-node')
                .attr('transform', d => `translate(${d.x},${d.y})`)
                .on('click', function(event, d) {
                    selectPersona(d);
                })
                .on('mouseover', function(event, d) {
                    if (selectedPersona && selectedPersona.id !== d.id) return;
                    
                    tooltip.transition().duration(200).style('opacity', 1);
                    tooltip.html(`
                        <strong>${d.fullName}</strong><br>
                        Category: ${d.category}<br>
                        <br><strong>Key Characteristics:</strong><br>
                        ${d.characteristics.map(c => `‚Ä¢ ${c}`).join('<br>')}
                        <br><br><em>Click to see connections</em>
                    `)
                    .style('left', (event.pageX + 10) + 'px')
                    .style('top', (event.pageY - 10) + 'px');
                })
                .on('mouseout', function() {
                    if (!selectedPersona) {
                        tooltip.transition().duration(200).style('opacity', 0);
                    }
                });

            nodes.append('circle')
                .attr('r', 45)
                .attr('fill', d => d.color)
                .attr('stroke', '#fff')
                .attr('stroke-width', 3);

            nodes.append('text')
                .attr('text-anchor', 'middle')
                .attr('dy', '.35em')
                .attr('fill', 'white')
                .attr('font-weight', 'bold')
                .attr('font-size', '11px')
                .each(function(d) {
                    const words = d.name.split(' ');
                    const text = d3.select(this);
                    words.forEach((word, i) => {
                        text.append('tspan')
                            .attr('x', 0)
                            .attr('dy', i === 0 ? '-0.6em' : '1.2em')
                            .text(word);
                    });
                });

            updateFilters();
        }

        function selectPersona(persona) {
            if (selectedPersona && selectedPersona.id === persona.id) {
                // Deselect
                selectedPersona = null;
                g.selectAll('.persona-node').classed('selected', false).classed('dimmed', false);
                g.selectAll('.link').classed('highlighted', false).classed('dimmed', false);
                g.selectAll('.cluster-circle').classed('dimmed', false);
                document.getElementById('stats').style.display = 'none';
                tooltip.transition().duration(200).style('opacity', 0);
            } else {
                // Select
                selectedPersona = persona;
                
                // Open the detail modal
                openPersonaPage(persona.id);
                
                // Get connections
                const connections = overlaps.filter(o => {
                    const sourceId = typeof o.source === 'object' ? o.source.id : o.source;
                    const targetId = typeof o.target === 'object' ? o.target.id : o.target;
                    return sourceId === persona.id || targetId === persona.id;
                });
                
                const connectedIds = new Set();
                connections.forEach(c => {
                    const sourceId = typeof c.source === 'object' ? c.source.id : c.source;
                    const targetId = typeof c.target === 'object' ? c.target.id : c.target;
                    connectedIds.add(sourceId);
                    connectedIds.add(targetId);
                });
                
                // Update visuals
                g.selectAll('.persona-node')
                    .classed('selected', d => d.id === persona.id)
                    .classed('dimmed', d => !connectedIds.has(d.id));
                
                g.selectAll('.link')
                    .classed('highlighted', d => {
                        const sourceId = typeof d.source === 'object' ? d.source.id : d.source;
                        const targetId = typeof d.target === 'object' ? d.target.id : d.target;
                        return sourceId === persona.id || targetId === persona.id;
                    })
                    .classed('dimmed', d => {
                        const sourceId = typeof d.source === 'object' ? d.source.id : d.source;
                        const targetId = typeof d.target === 'object' ? d.target.id : d.target;
                        return sourceId !== persona.id && targetId !== persona.id;
                    });
                
                // Update stats
                const strong = connections.filter(c => c.strength === 'strong').length;
                const medium = connections.filter(c => c.strength === 'medium').length;
                const weak = connections.filter(c => c.strength === 'weak').length;
                
                document.getElementById('stat-connections').textContent = connections.length;
                document.getElementById('stat-strong').textContent = strong;
                document.getElementById('stat-medium').textContent = medium;
                document.getElementById('stat-weak').textContent = weak;
                document.getElementById('stats').style.display = 'block';
            }
        }

        function highlightCluster(cluster) {
            // Highlight all personas in this cluster
            g.selectAll('.persona-node')
                .classed('dimmed', d => !cluster.personas.includes(d.id))
                .transition()
                .duration(300);
            
            g.selectAll('.cluster-circle')
                .classed('dimmed', d => d.name !== cluster.name)
                .transition()
                .duration(300);
        }

        function updateFilters() {
            g.selectAll('.link')
                .style('display', function() {
                    const strength = d3.select(this).attr('data-strength');
                    if (currentFilter === 'all') return 'block';
                    return strength === currentFilter ? 'block' : 'none';
                });
        }

        function resetView() {
            selectedPersona = null;
            currentFilter = 'all';
            
            // Reset filter buttons
            d3.selectAll('.filter-button').classed('active', false);
            d3.select('.filter-button[data-filter="all"]').classed('active', true);
            
            // Reset visuals
            g.selectAll('.persona-node')
                .classed('selected', false)
                .classed('dimmed', false);
            
            g.selectAll('.link')
                .classed('highlighted', false)
                .classed('dimmed', false)
                .style('display', 'block');
            
            g.selectAll('.cluster-circle')
                .classed('dimmed', false);
            
            // Reset zoom
            svg.transition()
                .duration(750)
                .call(zoom.transform, d3.zoomIdentity);
            
            document.getElementById('stats').style.display = 'none';
            tooltip.transition().duration(200).style('opacity', 0);
        }

        function toggleLabels() {
            labelsVisible = !labelsVisible;
            g.selectAll('.cluster-label')
                .transition()
                .duration(300)
                .style('opacity', labelsVisible ? 1 : 0);
        }
        
        // Navigate to persona page
        function openPersonaPage(personaId) {
            const personaPages = {
                1: 'dr-a-joe.html',
                2: 'dr-m-rogers.html',
                3: 'dr-k-clarkson.html',
                4: 'dr-c-yang.html',
                5: 'dr-g-house.html',
                6: 'dr-v-frizzle.html',
                7: 'd-k-kardashian.html',
                8: 'dr-b-nye.html',
                9: 'dr-mcstuffins.html',
                10: 'dr-a-sciuto.html'
            };
            
            const page = personaPages[personaId];
            if (page) {
                window.location.href = page;
            }
        }
    </script>

</body>
</html>